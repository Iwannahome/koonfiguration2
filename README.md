# Инструмент визуализации графа зависимостей для apt пакетов

**Проект:** Практическая работа по конфигурационному управлению  
**Учебное заведение:** РТУ МИРЭА  
**Группа:** ИКБО-63-24  
**Дисциплина:** Конфигурационное управление  
**Вариант:** 23

## Описание

Инструмент для анализа и визуализации графа зависимостей пакетов менеджера `apt` (Ubuntu/Debian).

**Статус:** ✅ Этап 1 - Минимальный прототип с конфигурацией
            ✅ Этап 2 - Сбор данных
            ✅ Этап 3 - Основные операции

## Требования

- Python 3.7+
- macOS, Linux или Windows

Проверка версии:
python3 –version

## Установка
git clone https://github.com/Iwannahome/koonfiguration2.git 
cd dep-visualizer 
chmod +x visualizer.py

## Использование

### Синтаксис
python3 visualizer.py -p PACKAGE -r REPOSITORY -o OUTPUT –test-mode

### Аргументы

| Аргумент | Форма | Обязательный | Описание |
|----------|-------|--------------|---------|
| `--package` | `-p` | ✅ Да | Имя пакета (например: vim, nginx) |
| `--repository` | `-r` | ✅ Да | URL репозитория или путь к тестовому файлу |
| `--output` | `-o` | ✅ Да | Имя выходного файла (.png, .svg, .jpg) |
| `--test-mode` | `-t` | ❌ Нет | Флаг для режима тестирования |

### Примеры

Анализ пакета vim:
python3 visualizer.py -p vim -r http://archive.ubuntu.com/ubuntu -o vim_graph.png
С тестовым режимом:
python3 visualizer.py -p test-pkg -r ./test_repo.txt -t -o graph.svg
Справка:
python3 visualizer.py –help
## Примеры обработки ошибок

Отсутствует обязательный аргумент:
python3 visualizer.py -p vim -o graph.png
Неверное расширение файла:
python3 visualizer.py -p vim -r http://repo.com -o output.txt
Пустое имя пакета:
python3 visualizer.py -p “” -r http://repo.com -o graph.png
## Структура проекта
dep-visualizer/ ├── visualizer.py      # Основной модуль CLI приложения 
├── readme.md          # Документация 
├── .gitignore         # Исключения для git 
└── .git/              # Git репозиторий

### Статистика из графа

Программа вычисляет:
- **Всего пакетов:** количество уникальных пакетов в графе
- **Всего связей:** количество зависимостей
- **Пакеты-листья:** пакеты без зависимостей
- **Максимальные зависимости:** пакет с наибольшим количеством зависимостей
- **Циклические зависимости:** обнаружение замкнутых кругов в графе

## Модули проекта (Этапы 1-3)

### visualizer.py
Основной модуль с CLI приложением и интеграцией всех компонентов.

**Функции:**
- `create_parser()` - создание парсера аргументов
- `validate_arguments()` - валидация параметров
- `print_configuration()` - вывод конфигурации
- `main()` - главная функция

### repository.py (Этап 2)
Модуль для работы с репозиторием Ubuntu (apt).

**Класс:** `PackageRepository`
- `fetch_packages_file()` - загрузка файла Packages
- `parse_packages()` - парсинг формата пакетов
- `get_package_info()` - информация о пакете
- `get_dependencies()` - получение зависимостей
- `get_all_packages()` - список всех пакетов
### graph_builder.py (Этап 3)
Модуль для построения графа зависимостей.

**Класс:** `DependencyGraph`
- `build_graph_dfs()` - построение графа с DFS
- `get_graph()` - получить граф
- `get_all_dependencies()` - все транзитивные зависимости
- `has_cycles()` - проверка циклов
- `get_cycles()` - список циклов
- `print_graph()` - красивый вывод графа
- `get_statistics()` - статистика по графу


## Технологический стек

- **Язык:** Python 3
- **Парсинг аргументов:** argparse (стандартная библиотека)
- **Версионирование:** Git
- **Хостинг:** GitHub
## Описание алгоритма DFS (Этап 3)

### Что такое DFS?

**DFS (Depth-First Search)** — алгоритм обхода графа, который идёт "вглубь" по каждой ветке до конца, прежде чем перейти к следующей ветке.

### Как работает в проекте?

1. **Рекурсия:** Функция `build_graph_dfs()` рекурсивно вызывает себя для каждой зависимости
2. **Отслеживание посещений:** Множество `visited` хранит уже обработанные пакеты
3. **Обнаружение циклов:** Множество `current_path` отслеживает текущий путь обхода
4. **Если обнаружен цикл:** Пакет останавливает обход и добавляет цикл в список

### Пример выполнения
Пакет A зависит от B и C B зависит от D C зависит от E D зависит от F
DFS обход: A → B → D → F (конец) ← возврат → E (конец) ← возврат → C → (обход завершён)

## История версий

## История версий
### v0.3.0 (Этап 3) - 9 ноября 2025

- ✅ Добавлен модуль graph_builder.py с классом DependencyGraph
- ✅ Реализован алгоритм DFS (поиск в глубину) с полной рекурсией
- ✅ Обработка циклических зависимостей
- ✅ Вывод полного графа зависимостей
- ✅ Статистика по графу (количество пакетов, связей, листьев)
- ✅ Обнаружение и вывод циклических зависимостей
- ✅ Все строки кода с подробными комментариями


### v0.2.0 (Этап 2) - 9 ноября 2025

- ✅ Реализован модуль работы с репозиторием apt
- ✅ Парсинг файла Packages из репозитория Ubuntu
- ✅ Получение информации о конкретном пакете
- ✅ Извлечение списка зависимостей
- ✅ Поддержка тестового режима с локальными файлами
- ✅ Кэширование данных репозитория

### v0.1.0 (Этап 1) - 3 ноября 2025

- ✅ CLI приложение с argparse
- ✅ 4 настраиваемых параметра
- ✅ Валидация параметров
- ✅ Трёхуровневая обработка ошибок
- ✅ Вывод конфигурации в формате таблицы
- ✅ Документация


## Автор

**Группа:** ИКБО-63-24  
**GitHub:** https://github.com/IwannaHome

## Лицензия

Образовательный проект РТУ МИРЭА

